{"version":3,"sources":["webpack:///js/give-stripe-popup.js","webpack:///webpack/bootstrap 2b1ef9f3274198a44a19","webpack:///./assets/src/js/frontend/give-stripe-popup.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","12","13","document","addEventListener","evt","give_stripe_format_currency","amount","form_element","formattedCurrency","Math","abs","parseFloat","accounting","unformat","Give","form","fn","getInfo","jQuery","selectedCurrency","getAttribute","give_stripe_vars","zero_based_currencies_list","indexOf","give_stripe_refresh_donate_button","$donate_button_wrap","querySelector","$donate_button","style","display","value","removeAttribute","stripe_handler","formWraps","querySelectorAll","Array","forEach","formWrap","token_created","formName","idPrefix","checkoutImage","checkout_image","length","checkoutAddress","checkout_address","isZipCode","zipcode_option","isRememberMe","remember_option","StripeCheckout","configure","key","publishable_key","image","locale","preferred_locale","billingAddress","token","args","processingHtml","createElement","setAttribute","background","opacity","position","top","left","bottom","right","zIndex","innerHTML","checkout_processing_text","stripe_account_id","stripeAccount","insertAdjacentElement","id","billing_country","billing_address_country_code","card_address","billing_address_line1","card_city","billing_address_city","card_state","billing_address_state","card_zip","billing_address_zip","verifyPayment","XMLHttpRequest","formData","FormData","errorElement","isFormSubmit","append","onreadystatechange","this","readyState","status","responseText","preventDefault","remove","response","open","give_global_vars","ajaxurl","send","submit","closed","close","onsubmit","donationAmount","donorEmail","sitename","description","zipCode","allowRememberMe","email","currency"],"mappings":"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","file":"js/give-stripe-popup.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 12);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 12:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(13);\n\n\n/***/ }),\n\n/***/ 13:\n/***/ (function(module, exports) {\n\n/**\n * Give - Stripe Popup Checkout JS\n */\n\ndocument.addEventListener('DOMContentLoaded', function (evt) {\n\n\tvar stripe_handler = [];\n\tvar formWraps = document.querySelectorAll('.give-form-wrap');\n\n\t// Loop through the number of forms on the page.\n\tArray.prototype.forEach.call(formWraps, function (formWrap) {\n\n\t\tvar token_created = false;\n\t\tvar form_element = formWrap.querySelector('.give-form');\n\t\tvar formName = form_element.querySelector('input[name=\"give-form-title\"]').value;\n\t\tvar idPrefix = form_element.querySelector('input[name=\"give-form-id-prefix\"]').value;\n\t\tvar checkoutImage = give_stripe_vars.checkout_image.length > 0 ? give_stripe_vars.checkout_image : '';\n\t\tvar checkoutAddress = give_stripe_vars.checkout_address.length > 0;\n\t\tvar isZipCode = give_stripe_vars.zipcode_option.length > 0;\n\t\tvar isRememberMe = give_stripe_vars.remember_option.length > 0;\n\n\t\tstripe_handler[idPrefix] = [];\n\n\t\t// Set stripe handler for form.\n\t\tstripe_handler[idPrefix] = StripeCheckout.configure({\n\t\t\tkey: give_stripe_vars.publishable_key,\n\t\t\timage: checkoutImage,\n\t\t\tlocale: give_stripe_vars.preferred_locale,\n\t\t\tbillingAddress: checkoutAddress,\n\t\t\ttoken: function token(_token, args) {\n\n\t\t\t\tvar processingHtml = document.createElement('div');\n\t\t\t\tprocessingHtml.setAttribute('class', 'stripe-checkout-process');\n\t\t\t\tprocessingHtml.style.background = '#FFFFFF';\n\t\t\t\tprocessingHtml.style.opacity = '0.75';\n\t\t\t\tprocessingHtml.style.position = 'fixed';\n\t\t\t\tprocessingHtml.style.top = '0';\n\t\t\t\tprocessingHtml.style.left = '0';\n\t\t\t\tprocessingHtml.style.bottom = '0';\n\t\t\t\tprocessingHtml.style.right = '0';\n\t\t\t\tprocessingHtml.style.zIndex = '2147483646';\n\t\t\t\tprocessingHtml.style.display = 'none';\n\t\t\t\tprocessingHtml.innerHTML = '<div class=\"give-stripe-checkout-processing-container\" style=\"position: absolute;top: 50%;left: 50%;width: 300px; margin-left: -150px; text-align:center;\"><div style=\"display:inline-block;\"><span class=\"give-loading-animation\" style=\"color: #333;height:26px;width:26px;font-size:26px; margin:2px 0 0;\"></span><span style=\"color:#333; font-size: 18px; margin:0 0 0 10px;\">' + give_stripe_vars.checkout_processing_text + '</span></div></div>';\n\n\t\t\t\ttoken_created = true;\n\n\t\t\t\t// For Stripe Connect API Users.\n\t\t\t\tif ('' !== give_stripe_vars.stripe_account_id) {\n\t\t\t\t\t_token.stripeAccount = give_stripe_vars.stripe_account_id;\n\t\t\t\t}\n\n\t\t\t\t// Supplemental loading animation while the donation form submits.\n\t\t\t\t// @see: https://github.com/WordImpress/Give-Stripe/issues/79\n\t\t\t\tform_element.insertAdjacentElement('beforeend', processingHtml);\n\n\t\t\t\t// Assign token to its hidden field for submitting it to the server.\n\t\t\t\tform_element.querySelector('#give-stripe-source-' + idPrefix).value = _token.id;\n\n\t\t\t\t// // Add billing address fields?\n\t\t\t\tif (checkoutAddress) {\n\n\t\t\t\t\t// Create Billing Country Element.\n\t\t\t\t\tvar billing_country = document.createElement('input');\n\t\t\t\t\tbilling_country.setAttribute('type', 'hidden');\n\t\t\t\t\tbilling_country.setAttribute('name', 'billing_country');\n\t\t\t\t\tbilling_country.setAttribute('value', args.billing_address_country_code);\n\t\t\t\t\tform_element.insertAdjacentElement('afterbegin', billing_country);\n\n\t\t\t\t\t// Create Billing Address Element.\n\t\t\t\t\tvar card_address = document.createElement('input');\n\t\t\t\t\tcard_address.setAttribute('type', 'hidden');\n\t\t\t\t\tcard_address.setAttribute('name', 'card_address');\n\t\t\t\t\tcard_address.setAttribute('value', args.billing_address_line1);\n\t\t\t\t\tform_element.insertAdjacentElement('afterbegin', card_address);\n\n\t\t\t\t\t// Create Billing City Element.\n\t\t\t\t\tvar card_city = document.createElement('input');\n\t\t\t\t\tcard_city.setAttribute('type', 'hidden');\n\t\t\t\t\tcard_city.setAttribute('name', 'card_city');\n\t\t\t\t\tcard_city.setAttribute('value', args.billing_address_city);\n\t\t\t\t\tform_element.insertAdjacentElement('afterbegin', card_city);\n\n\t\t\t\t\t// Create Billing State Element.\n\t\t\t\t\tvar card_state = document.createElement('input');\n\t\t\t\t\tcard_state.setAttribute('type', 'hidden');\n\t\t\t\t\tcard_state.setAttribute('name', 'card_state');\n\t\t\t\t\tcard_state.setAttribute('value', args.billing_address_state);\n\t\t\t\t\tform_element.insertAdjacentElement('afterbegin', card_state);\n\n\t\t\t\t\t// Create Billing ZIP Element.\n\t\t\t\t\tvar card_zip = document.createElement('input');\n\t\t\t\t\tcard_zip.setAttribute('type', 'hidden');\n\t\t\t\t\tcard_zip.setAttribute('name', 'card_zip');\n\t\t\t\t\tcard_zip.setAttribute('value', args.billing_address_zip);\n\t\t\t\t\tform_element.insertAdjacentElement('afterbegin', card_zip);\n\t\t\t\t}\n\n\t\t\t\tvar verifyPayment = new XMLHttpRequest();\n\t\t\t\tvar formData = new FormData(form_element);\n\t\t\t\tvar errorElement = form_element.querySelector('#give-stripe-payment-errors-' + idPrefix);\n\t\t\t\tvar isFormSubmit = false;\n\n\t\t\t\tformData.append('action', 'give_process_donation');\n\t\t\t\tformData.append('give_ajax', true);\n\n\t\t\t\t// Do something on Ajax on state change.\n\t\t\t\tverifyPayment.onreadystatechange = function (evt) {\n\n\t\t\t\t\tif (4 === this.readyState && 200 === this.status && 'success' !== this.responseText) {\n\t\t\t\t\t\tevt.preventDefault();\n\n\t\t\t\t\t\tisFormSubmit = false;\n\n\t\t\t\t\t\t// Remove added elements when error is found.\n\t\t\t\t\t\tform_element.querySelector('input[name=\"billing_country\"]').remove();\n\t\t\t\t\t\tform_element.querySelector('input[name=\"card_address\"]').remove();\n\t\t\t\t\t\tform_element.querySelector('input[name=\"card_state\"]').remove();\n\t\t\t\t\t\tform_element.querySelector('input[name=\"card_city\"]').remove();\n\t\t\t\t\t\tform_element.querySelector('input[name=\"card_zip\"]').remove();\n\n\t\t\t\t\t\t// Don't show donation processing overlay.\n\t\t\t\t\t\tdocument.querySelector('.stripe-checkout-process').style.display = 'none';\n\n\t\t\t\t\t\t// Show Error.\n\t\t\t\t\t\terrorElement.innerHTML = this.response;\n\n\t\t\t\t\t\t// Refresh Donate Button.\n\t\t\t\t\t\tgive_stripe_refresh_donate_button(form_element);\n\t\t\t\t\t} else {\n\t\t\t\t\t\terrorElement.innerHTML = '';\n\t\t\t\t\t\tdocument.querySelector('.stripe-checkout-process').style.display = 'block';\n\t\t\t\t\t\tisFormSubmit = true;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tverifyPayment.open('POST', give_global_vars.ajaxurl, false);\n\t\t\t\tverifyPayment.send(formData);\n\n\t\t\t\tif (true === isFormSubmit) {\n\t\t\t\t\t// Submit form after charge source brought back from Stripe.\n\t\t\t\t\tform_element.submit();\n\t\t\t\t}\n\t\t\t},\n\t\t\tclosed: function closed() {\n\n\t\t\t\t// Close button click behavior goes here.\n\t\t\t\tif (!token_created) {\n\n\t\t\t\t\tgive_stripe_refresh_donate_button(form_element);\n\n\t\t\t\t\t// Close handler if it is still open.\n\t\t\t\t\tstripe_handler[idPrefix].close();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tform_element.onsubmit = function (evt) {\n\n\t\t\tvar selectedGateway = form_element.querySelector('.give-gateway:checked').value;\n\n\t\t\t// If Stripe Checkout is enabled, then restrict default form submission.\n\t\t\tif ('stripe' === selectedGateway) {\n\t\t\t\tevt.preventDefault();\n\n\t\t\t\tvar donationAmount = form_element.querySelector('.give-final-total-amount').getAttribute('data-total');\n\t\t\t\tvar donorEmail = form_element.querySelector('input[name=\"give_email\"]').value;\n\n\t\t\t\t// Open Stripe Checkout Modal.\n\t\t\t\tstripe_handler[idPrefix].open({\n\t\t\t\t\tname: give_stripe_vars.sitename,\n\t\t\t\t\tdescription: formName,\n\t\t\t\t\tamount: give_stripe_format_currency(donationAmount, form_element),\n\t\t\t\t\tzipCode: isZipCode,\n\t\t\t\t\tallowRememberMe: isRememberMe,\n\t\t\t\t\temail: donorEmail,\n\t\t\t\t\tcurrency: form_element.getAttribute('data-currency_code')\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t});\n\n\t/**\n  * Format Stripe Currency\n  *\n  * @param {number} amount       Donation Amount.\n  * @param {object} form_element Donation Form Element.\n  *\n  * @returns {number}\n  */\n\tfunction give_stripe_format_currency(amount, form_element) {\n\n\t\tvar formattedCurrency = Math.abs(parseFloat(accounting.unformat(amount, Give.form.fn.getInfo('decimal_separator', jQuery(form_element)))));\n\t\tvar selectedCurrency = form_element.getAttribute('data-currency_code');\n\t\tvar zeroDecimalCurrencies = give_stripe_vars.zero_based_currencies_list;\n\n\t\t// If not Zero Decimal Based Currency, then multiply with 100.\n\t\tif (zeroDecimalCurrencies.indexOf(selectedCurrency) < 0) {\n\t\t\tformattedCurrency = formattedCurrency * 100;\n\t\t}\n\n\t\treturn formattedCurrency;\n\t}\n\n\t/**\n  * This function is used to reset the donate button.\n  *\n  * @param form_element\n  */\n\tfunction give_stripe_refresh_donate_button(form_element) {\n\t\tvar $donate_button_wrap = form_element.querySelector('.give-submit-button-wrap');\n\t\tvar $donate_button = $donate_button_wrap.querySelector('#give-purchase-button');\n\n\t\t// Remove loading animations.\n\t\t$donate_button_wrap.querySelector('.give-loading-animation').style.display = 'none';\n\n\t\t// Refresh donate button.\n\t\t$donate_button.value = $donate_button.getAttribute('data-before-validation-label');\n\t\t$donate_button.removeAttribute('disabled');\n\t}\n});\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// js/give-stripe-popup.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2b1ef9f3274198a44a19","/**\n * Give - Stripe Popup Checkout JS\n */\n\ndocument.addEventListener( 'DOMContentLoaded', ( evt ) => {\n\n\tlet stripe_handler = [];\n\tconst formWraps    = document.querySelectorAll( '.give-form-wrap' );\n\n\t// Loop through the number of forms on the page.\n\tArray.prototype.forEach.call( formWraps, function( formWrap ) {\n\n\t\tlet token_created     = false;\n\t\tconst form_element    = formWrap.querySelector( '.give-form' );\n\t\tconst formName        = form_element.querySelector( 'input[name=\"give-form-title\"]' ).value;\n\t\tconst idPrefix        = form_element.querySelector( 'input[name=\"give-form-id-prefix\"]' ).value;\n\t\tconst checkoutImage   = ( give_stripe_vars.checkout_image.length > 0 ) ? give_stripe_vars.checkout_image : '';\n\t\tconst checkoutAddress = ( give_stripe_vars.checkout_address.length > 0 );\n\t\tconst isZipCode       = ( give_stripe_vars.zipcode_option.length > 0 );\n\t\tconst isRememberMe    = ( give_stripe_vars.remember_option.length > 0 );\n\n\t\tstripe_handler[ idPrefix ] = [];\n\n\t\t// Set stripe handler for form.\n\t\tstripe_handler[ idPrefix ] = StripeCheckout.configure( {\n\t\t\tkey: give_stripe_vars.publishable_key,\n\t\t\timage: checkoutImage,\n\t\t\tlocale: give_stripe_vars.preferred_locale,\n\t\t\tbillingAddress: checkoutAddress,\n\t\t\ttoken: function( token, args ) {\n\n\t\t\t\tconst processingHtml = document.createElement( 'div' );\n\t\t\t\tprocessingHtml.setAttribute( 'class', 'stripe-checkout-process' );\n\t\t\t\tprocessingHtml.style.background = '#FFFFFF';\n\t\t\t\tprocessingHtml.style.opacity = '0.75';\n\t\t\t\tprocessingHtml.style.position = 'fixed';\n\t\t\t\tprocessingHtml.style.top = '0';\n\t\t\t\tprocessingHtml.style.left = '0';\n\t\t\t\tprocessingHtml.style.bottom = '0';\n\t\t\t\tprocessingHtml.style.right = '0';\n\t\t\t\tprocessingHtml.style.zIndex = '2147483646';\n\t\t\t\tprocessingHtml.style.display = 'none';\n\t\t\t\tprocessingHtml.innerHTML = '<div class=\"give-stripe-checkout-processing-container\" style=\"position: absolute;top: 50%;left: 50%;width: 300px; margin-left: -150px; text-align:center;\"><div style=\"display:inline-block;\"><span class=\"give-loading-animation\" style=\"color: #333;height:26px;width:26px;font-size:26px; margin:2px 0 0;\"></span><span style=\"color:#333; font-size: 18px; margin:0 0 0 10px;\">' + give_stripe_vars.checkout_processing_text + '</span></div></div>';\n\n\t\t\t\ttoken_created = true;\n\n\t\t\t\t// For Stripe Connect API Users.\n\t\t\t\tif ( '' !== give_stripe_vars.stripe_account_id ) {\n\t\t\t\t\ttoken.stripeAccount = give_stripe_vars.stripe_account_id;\n\t\t\t\t}\n\n\t\t\t\t// Supplemental loading animation while the donation form submits.\n\t\t\t\t// @see: https://github.com/WordImpress/Give-Stripe/issues/79\n\t\t\t\tform_element.insertAdjacentElement( 'beforeend', processingHtml );\n\n\t\t\t\t// Assign token to its hidden field for submitting it to the server.\n\t\t\t\tform_element.querySelector( '#give-stripe-source-' + idPrefix ).value = token.id;\n\n\t\t\t\t// // Add billing address fields?\n\t\t\t\tif ( checkoutAddress ) {\n\n\t\t\t\t\t// Create Billing Country Element.\n\t\t\t\t\tconst billing_country = document.createElement( 'input' );\n\t\t\t\t\tbilling_country.setAttribute( 'type', 'hidden' );\n\t\t\t\t\tbilling_country.setAttribute( 'name', 'billing_country' );\n\t\t\t\t\tbilling_country.setAttribute( 'value', args.billing_address_country_code );\n\t\t\t\t\tform_element.insertAdjacentElement( 'afterbegin', billing_country );\n\n\t\t\t\t\t// Create Billing Address Element.\n\t\t\t\t\tconst card_address = document.createElement( 'input' );\n\t\t\t\t\tcard_address.setAttribute( 'type', 'hidden' );\n\t\t\t\t\tcard_address.setAttribute( 'name', 'card_address' );\n\t\t\t\t\tcard_address.setAttribute( 'value', args.billing_address_line1 );\n\t\t\t\t\tform_element.insertAdjacentElement( 'afterbegin', card_address );\n\n\t\t\t\t\t// Create Billing City Element.\n\t\t\t\t\tconst card_city = document.createElement( 'input' );\n\t\t\t\t\tcard_city.setAttribute( 'type', 'hidden' );\n\t\t\t\t\tcard_city.setAttribute( 'name', 'card_city' );\n\t\t\t\t\tcard_city.setAttribute( 'value', args.billing_address_city );\n\t\t\t\t\tform_element.insertAdjacentElement( 'afterbegin', card_city );\n\n\t\t\t\t\t// Create Billing State Element.\n\t\t\t\t\tconst card_state = document.createElement( 'input' );\n\t\t\t\t\tcard_state.setAttribute( 'type', 'hidden' );\n\t\t\t\t\tcard_state.setAttribute( 'name', 'card_state' );\n\t\t\t\t\tcard_state.setAttribute( 'value', args.billing_address_state );\n\t\t\t\t\tform_element.insertAdjacentElement( 'afterbegin', card_state );\n\n\t\t\t\t\t// Create Billing ZIP Element.\n\t\t\t\t\tconst card_zip = document.createElement( 'input' );\n\t\t\t\t\tcard_zip.setAttribute( 'type', 'hidden' );\n\t\t\t\t\tcard_zip.setAttribute( 'name', 'card_zip' );\n\t\t\t\t\tcard_zip.setAttribute( 'value', args.billing_address_zip );\n\t\t\t\t\tform_element.insertAdjacentElement( 'afterbegin', card_zip );\n\n\t\t\t\t}\n\n\t\t\t\tlet verifyPayment = new XMLHttpRequest();\n\t\t\t\tlet formData      = new FormData( form_element );\n\t\t\t\tlet errorElement  = form_element.querySelector( '#give-stripe-payment-errors-' + idPrefix );\n\t\t\t\tlet isFormSubmit  = false;\n\n\t\t\t\tformData.append( 'action', 'give_process_donation' );\n\t\t\t\tformData.append( 'give_ajax', true );\n\n\t\t\t\t// Do something on Ajax on state change.\n\t\t\t\tverifyPayment.onreadystatechange = function( evt ) {\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t4 === this.readyState\n\t\t\t\t\t\t&& 200 === this.status\n\t\t\t\t\t\t&& 'success' !== this.responseText\n\t\t\t\t\t) {\n\t\t\t\t\t\tevt.preventDefault();\n\n\t\t\t\t\t\tisFormSubmit = false;\n\n\t\t\t\t\t\t// Remove added elements when error is found.\n\t\t\t\t\t\tform_element.querySelector( 'input[name=\"billing_country\"]' ).remove();\n\t\t\t\t\t\tform_element.querySelector( 'input[name=\"card_address\"]' ).remove();\n\t\t\t\t\t\tform_element.querySelector( 'input[name=\"card_state\"]' ).remove();\n\t\t\t\t\t\tform_element.querySelector( 'input[name=\"card_city\"]' ).remove();\n\t\t\t\t\t\tform_element.querySelector( 'input[name=\"card_zip\"]' ).remove();\n\n\t\t\t\t\t\t// Don't show donation processing overlay.\n\t\t\t\t\t\tdocument.querySelector( '.stripe-checkout-process' ).style.display = 'none';\n\n\t\t\t\t\t\t// Show Error.\n\t\t\t\t\t\terrorElement.innerHTML = this.response;\n\n\t\t\t\t\t\t// Refresh Donate Button.\n\t\t\t\t\t\tgive_stripe_refresh_donate_button( form_element );\n\t\t\t\t\t} else {\n\t\t\t\t\t\terrorElement.innerHTML = '';\n\t\t\t\t\t\tdocument.querySelector( '.stripe-checkout-process' ).style.display = 'block';\n\t\t\t\t\t\tisFormSubmit = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t};\n\t\t\t\tverifyPayment.open( 'POST', give_global_vars.ajaxurl, false );\n\t\t\t\tverifyPayment.send( formData );\n\n\t\t\t\tif ( true === isFormSubmit ) {\n\t\t\t\t\t// Submit form after charge source brought back from Stripe.\n\t\t\t\t\tform_element.submit();\n\t\t\t\t}\n\t\t\t},\n\t\t\tclosed: function() {\n\n\t\t\t\t// Close button click behavior goes here.\n\t\t\t\tif ( ! token_created ) {\n\n\t\t\t\t\tgive_stripe_refresh_donate_button( form_element );\n\n\t\t\t\t\t// Close handler if it is still open.\n\t\t\t\t\tstripe_handler[ idPrefix ].close();\n\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tform_element.onsubmit = function( evt ) {\n\n\t\t\tconst selectedGateway = form_element.querySelector( '.give-gateway:checked' ).value;\n\n\t\t\t// If Stripe Checkout is enabled, then restrict default form submission.\n\t\t\tif ( 'stripe' === selectedGateway ) {\n\t\t\t\tevt.preventDefault();\n\n\t\t\t\tconst donationAmount = form_element.querySelector( '.give-final-total-amount' ).getAttribute( 'data-total' );\n\t\t\t\tconst donorEmail     = form_element.querySelector( 'input[name=\"give_email\"]' ).value;\n\n\t\t\t\t// Open Stripe Checkout Modal.\n\t\t\t\tstripe_handler[ idPrefix ].open( {\n\t\t\t\t\tname: give_stripe_vars.sitename,\n\t\t\t\t\tdescription: formName,\n\t\t\t\t\tamount: give_stripe_format_currency( donationAmount, form_element ),\n\t\t\t\t\tzipCode: isZipCode,\n\t\t\t\t\tallowRememberMe: isRememberMe,\n\t\t\t\t\temail: donorEmail,\n\t\t\t\t\tcurrency: form_element.getAttribute( 'data-currency_code' ),\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\t/**\n\t * Format Stripe Currency\n\t *\n\t * @param {number} amount       Donation Amount.\n\t * @param {object} form_element Donation Form Element.\n\t *\n\t * @returns {number}\n\t */\n\tfunction give_stripe_format_currency( amount, form_element ) {\n\n\t\tlet formattedCurrency       = Math.abs( parseFloat( accounting.unformat( amount, Give.form.fn.getInfo( 'decimal_separator', jQuery( form_element ) ) ) ) );\n\t\tconst selectedCurrency      = form_element.getAttribute( 'data-currency_code' );\n\t\tconst zeroDecimalCurrencies = give_stripe_vars.zero_based_currencies_list;\n\n\t\t// If not Zero Decimal Based Currency, then multiply with 100.\n\t\tif ( zeroDecimalCurrencies.indexOf( selectedCurrency ) < 0 ) {\n\t\t\tformattedCurrency = formattedCurrency * 100;\n\t\t}\n\n\t\treturn formattedCurrency;\n\t}\n\n\t/**\n\t * This function is used to reset the donate button.\n\t *\n\t * @param form_element\n\t */\n\tfunction give_stripe_refresh_donate_button( form_element ) {\n\t\tconst $donate_button_wrap = form_element.querySelector( '.give-submit-button-wrap' );\n\t\tconst $donate_button      = $donate_button_wrap.querySelector( '#give-purchase-button' );\n\n\t\t// Remove loading animations.\n\t\t$donate_button_wrap.querySelector( '.give-loading-animation' ).style.display = 'none';\n\n\t\t// Refresh donate button.\n\t\t$donate_button.value = $donate_button.getAttribute( 'data-before-validation-label' );\n\t\t$donate_button.removeAttribute( 'disabled' );\n\t}\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./assets/src/js/frontend/give-stripe-popup.js"],"sourceRoot":""}